<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>score.py</title>
  <link rel="stylesheet" href="pycco.css">
</head>
<body>
<div id="background"></div>
<div id='container'>
  <div class='section'>
    <div class='docs'><h1>score.py</h1></div>
  </div>
  <div class='clearall'>
  <div class='section' id='section-0'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-0'>#</a>
      </div>
      <h2>outline: score</h2>
<p>simpson paradox
qq, cmdf, k-smirnov
rank-sum, mann-whitney... p-val</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-1'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-1'>#</a>
      </div>
      <h2>refs</h2>
<p>entropy
https://www.ncbi.nlm.nih.gov/pubmed/10843903</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-2'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-2'>#</a>
      </div>
      <p>cross-validation
http://bytefish.de/blog/gender_classification/
http://normaldeviate.wordpress.com/
bonferonni corrrected confidence interval
time of day effect http://nbviewer.ipython.org/urls/raw.github.com/jrjohansson/scientific-python-lectures/master/Lecture-4-Matplotlib.ipynb
http://blog.nextgenetics.net/?e=94</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-3'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-3'>#</a>
      </div>
      <p>plot
http://nbviewer.ipython.org/urls/raw.github.com/jrjohansson/scientific-python-lectures/master/Lecture-4-Matplotlib.ipynb
https://github.com/mikedewar/d3py
https://github.com/wrobstory/vincent
http://blog.nextgenetics.net/?e=85
http://pandas.pydata.org/pandas-docs/dev/visualization.html#scatter-plot-matrix</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-4'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-4'>#</a>
      </div>
      <p>pandas
http://nbviewer.ipython.org/urls/gist.github.com/wesm/5773719/raw/1399562c0a02b9edc3d13c71a70387a31d87260b/tutorial.ipynb
www.bearrelroll.com/2013/05/python-pandas-tutorial/
http://stackoverflow.com/questions/18598891/pandas-plotting-integration-with-matplotlib</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-5'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-5'>#</a>
      </div>
      <h2>stat prob. space vs biological prob. space</h2>
<p>http://www.gwern.net/Lewis%20meditation
http://blog.nextgenetics.net/?e=85
http://www.dspguide.com/ch34/1.htm --benford</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-6'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-6'>#</a>
      </div>
      <script type="text/javascript" src="jquery-latest.min.js"></script>

<p><link href="knowlstyle.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="knowl.js"></script></p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="s">&quot;class score&quot;</span>
<span class="s">&quot;input:&quot;</span>
<span class="s">&quot;  data:[ [a,b,c], [],  ] (nx6)&quot;</span>
<span class="s">&quot;  entropy:[            ] (nx1)&quot;</span>
<span class="s">&quot;  kde:[                ] (nx1) if 1 is hard 0 easy&quot;</span>
<span class="s">&quot;  bin:[                ] (nx1) if 1 is hard 0 easy &quot;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-7'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-7'>#</a>
      </div>
      <h2></h2>
<p>hard-easy 
alerts over global 000, 001, 010, 100, 101
kernel-hash</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="kn">import</span> <span class="nn">pickle</span><span class="o">,</span> <span class="nn">pprint</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">plot</span><span class="p">,</span><span class="n">show</span><span class="p">,</span><span class="n">hist</span><span class="p">,</span><span class="n">close</span>
<span class="kn">from</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">import</span> <span class="n">imshow</span>

<span class="kn">from</span> <span class="nn">astroML.plotting</span> <span class="kn">import</span> <span class="n">hist</span>
<span class="kn">from</span> <span class="nn">astroML.density_estimation</span> <span class="kn">import</span> <span class="n">bayesian_blocks</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">kde</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">norm</span>
<span class="kn">import</span> <span class="nn">matplotlib.mlab</span> <span class="kn">as</span> <span class="nn">mlab</span>
 
<span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">loadtxt</span>
<span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="n">leastsq</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">sem</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">izip</span>
<span class="kn">import</span> <span class="nn">os.path</span>
<span class="kn">import</span> <span class="nn">scipy</span> <span class="kn">as</span> <span class="nn">sp</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">itertools</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-8'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-8'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">class</span> <span class="nc">score</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-9'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-9'>#</a>
      </div>
      <h2>data</h2>
<p>init</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">weightpkl</span><span class="p">,</span> <span class="n">entrpkl</span><span class="p">,</span> <span class="n">incorrectpkl</span><span class="p">,</span> <span class="n">datapkl</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-10'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-10'>#</a>
      </div>
      <p>entropy</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">entfile</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="n">entrpkl</span><span class="p">,</span><span class="s">&#39;rb&#39;</span><span class="p">)</span>
		<span class="n">entpkl</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">entfile</span><span class="p">)</span>
		<span class="n">entnp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span> <span class="n">entpkl</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span> <span class="p">)</span>
		<span class="n">entfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-11'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-11'>#</a>
      </div>
      <p>weight</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">wtfile</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="n">weightpkl</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span>
		<span class="n">wtpkl</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">wtfile</span><span class="p">)</span>
		<span class="n">wtnp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span> <span class="n">wtpkl</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span> <span class="p">)</span>
		<span class="n">wtfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-12'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-12'>#</a>
      </div>
      <p>incorrect incorrect=1 correct=0</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">incfile</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span> <span class="n">incorrectpkl</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span> <span class="p">)</span>
		<span class="n">incpkl</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">incfile</span><span class="p">)</span>
		<span class="n">incnp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span> <span class="n">incpkl</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
		<span class="n">incfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-13'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-13'>#</a>
      </div>
      <p>data vital-headers, readings
dt = [ vitals, alerts, readings ]</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">datafile</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span> <span class="n">datapkl</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span> <span class="p">)</span>
		<span class="n">dpkl</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">datafile</span><span class="p">)</span>
		<span class="n">dv</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span> <span class="n">dpkl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
		<span class="n">da</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span> <span class="n">dpkl</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
		<span class="n">dr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span> <span class="n">dpkl</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
		<span class="n">datafile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-14'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-14'>#</a>
      </div>
      <p>class instance members</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="bp">self</span><span class="o">.</span><span class="n">wts</span> <span class="o">=</span> <span class="n">wtnp</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">entnrm</span> <span class="o">=</span> <span class="n">entnp</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">inc</span> <span class="o">=</span> <span class="n">incnp</span> <span class="c">#full size 1=inc 0=corr</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">bins</span> <span class="o">=</span> <span class="bp">None</span>	<span class="c">#bayes blocks intervals</span>
 		<span class="bp">self</span><span class="o">.</span><span class="n">entbys</span> <span class="o">=</span> <span class="bp">None</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">=</span><span class="p">[]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-15'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-15'>#</a>
      </div>
      <p>self.data[0] = dv; self.data[1]= da; self.data[2]=dr</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dv</span><span class="p">);</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">da</span><span class="p">);</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dr</span><span class="p">);</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="bp">None</span> <span class="c">#panda dataframe</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">dw</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wts</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">alarmV</span> <span class="o">=</span><span class="bp">None</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">he</span><span class="o">=</span><span class="bp">None</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-16'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-16'>#</a>
      </div>
      <h2>utility function: data</h2>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">pckle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selfdata</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
	  	<span class="n">pklfle</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;wb&#39;</span><span class="p">)</span>
		<span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">selfdata</span><span class="p">,</span><span class="n">pklfle</span><span class="p">)</span>
	 	<span class="n">pklfle</span><span class="o">.</span><span class="n">close</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-17'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-17'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">pcklcsv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;pandacsv.csv&#39;</span><span class="p">,</span> <span class="s">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ofile</span><span class="p">:</span>
			<span class="n">writeF</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">ofile</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">&#39;,&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-18'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-18'>#</a>
      </div>
      <p>vitals alerts readings</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>			<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">izip</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">):</span>
				<span class="n">ll</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> 
				<span class="n">row2</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
				<span class="n">row2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
				<span class="n">writeF</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span> <span class="n">row2</span> <span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-19'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-19'>#</a>
      </div>
      <p>tele_raw_dta = np.recfromcsv("/home/solver/data/raw-labeled-th/all.csv", dtype=dd)
mimic_raw = np.recfromcsv("/home/solver/Desktop/data/raw-labled-mimic/all.csv", dtype=dd)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-20'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-20'>#</a>
      </div>
      <h2>pandas data frame</h2>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">pnd</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">dtf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="c">#[vitals,alerts,readings]</span>
		<span class="n">dataframe</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">dtf</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="n">dtf</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>		
		<span class="k">print</span> <span class="s">&#39;DATA**&#39;</span><span class="p">,</span> <span class="n">dataframe</span>	
			
	
		<span class="k">print</span> <span class="n">pd</span><span class="o">.</span><span class="n">__version__</span>
		<span class="k">return</span> <span class="n">dataframe</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-21'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-21'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">chckfile</span><span class="p">(</span> <span class="n">fle</span><span class="p">,</span> <span class="n">func</span> <span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-22'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-22'>#</a>
      </div>
      <p>pickle</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span> <span class="n">fle</span> <span class="p">)</span> <span class="p">:</span>
				<span class="n">bayesfile</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="n">fle</span> <span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span>
				<span class="n">bypkl</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">bayesfile</span><span class="p">)</span>
				<span class="n">bynp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span> <span class="n">bypkl</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span> <span class="p">)</span>
				<span class="n">ab</span><span class="o">.</span><span class="n">bins</span> <span class="o">=</span> <span class="n">bynp</span>
				<span class="n">bayesfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-23'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-23'>#</a>
      </div>
      <p>function</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">else</span> <span class="p">:</span>
			<span class="n">ww</span> <span class="o">=</span> <span class="n">ab</span><span class="o">.</span><span class="n">wts</span><span class="o">.</span><span class="n">flat</span>
			<span class="n">intervals</span> <span class="o">=</span>  <span class="n">bayesian_blocks</span><span class="p">(</span><span class="n">ww</span><span class="p">)</span> <span class="c">#array of optimal bin_edges</span>
			<span class="n">ab</span><span class="o">.</span><span class="n">bins</span> <span class="o">=</span> <span class="n">intervals</span>
			<span class="n">ab</span><span class="o">.</span><span class="n">pckle</span><span class="p">(</span><span class="n">ab</span><span class="o">.</span><span class="n">bins</span><span class="p">,</span> <span class="n">fle</span> <span class="p">)</span> 
			<span class="k">print</span> <span class="s">&#39;bins**&#39;</span><span class="p">,</span> <span class="n">ab</span><span class="o">.</span><span class="n">bins</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-24'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-24'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">dframe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">&quot;get scr attributes&quot;</span>
 		<span class="s">&quot;[vitals,alerts,readings]&quot;</span>
	

		<span class="s">&quot;frame&quot;</span>
		<span class="n">hdr</span> <span class="o">=</span> <span class="p">[</span> <span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span>
		<span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="n">hdr</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span> <span class="p">)</span> <span class="c">#remove Label</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-25'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-25'>#</a>
      </div>
      <p>print 'lbl', len(self.data[2][:,5])</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">df2</span><span class="p">[</span><span class="s">&#39;Label&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">][:,</span><span class="mi">5</span><span class="p">]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-26'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-26'>#</a>
      </div>
      <p>set columns</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="s">&quot;incorrect&quot;</span> 
		<span class="n">df2</span><span class="p">[</span><span class="s">&#39;INC&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inc</span>
		
		<span class="s">&quot;entropy -- return heic&quot;</span>
		<span class="n">df2</span><span class="p">[</span><span class="s">&#39;ENT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entbys</span>  <span class="c">#print &#39;e len\n&#39; , self.entbys[-5:-1],&#39;\n&#39;, df2.tail(5)</span>
		<span class="n">ff</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s">&#39;ENT&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">order</span><span class="p">()</span>
		<span class="k">print</span> <span class="s">&#39;ent&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">ff</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">ff</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-27'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-27'>#</a>
      </div>
      <p>hdi</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="s">&quot;--histogram kde plotkdefit()&quot;</span>
		<span class="n">mu</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s">&#39;ENT&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
		<span class="n">si</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s">&#39;ENT&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-28'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-28'>#</a>
      </div>
      <p>tl= "r'$\mathrm{Histogram\ of\ Entropy:}\ \mu=%.3f,\ \sigma=%.3f$' %(mu, si)"
df2['ENT'].hist(bins=self.bins, color='k', alpha=0.3, normed=True)
df2['ENT'].plot(kind='kde',style='k--', xlim=[0,(df2['ENT'].max()+5)] , title='entropy over weights')</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		
		<span class="s">&quot;sort self.entbys, get hdi -&gt; 95ci, all other points h&quot;</span>
		<span class="n">df2</span><span class="p">[</span><span class="s">&#39;srt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s">&#39;ENT&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sort</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-29'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-29'>#</a>
      </div>
      <p>hdi = lambda x: (x isin 
df2['hdi'] = df2['ENT'].map(hdi)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="s">&quot;easy-way just set a lambda set non-zero to hard&quot;</span>
		<span class="n">he</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">&gt;</span><span class="mi">0</span> <span class="ow">and</span> <span class="s">&#39;h&#39;</span> <span class="ow">or</span> <span class="s">&#39;e&#39;</span>
		<span class="n">df2</span><span class="p">[</span><span class="s">&#39;HE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s">&#39;ENT&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">he</span><span class="p">)</span>
		<span class="k">print</span> <span class="s">&#39;he</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">df2</span><span class="p">[</span><span class="s">&#39;HE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">he</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s">&#39;HE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-30'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-30'>#</a>
      </div>
      <p>TODO 2013-10-16 11:42
make function that takes hdi and uses that as 95%ci</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-31'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-31'>#</a>
      </div>
      <p>self.dw</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="s">&quot;weights&quot;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-32'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-32'>#</a>
      </div>
      <p>4150x50 df['WTS'] = self.wts</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">print</span> <span class="s">&#39;wts shape&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">wts</span><span class="o">.</span><span class="n">shape</span>
		<span class="k">print</span> <span class="bp">self</span><span class="o">.</span><span class="n">dw</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-33'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-33'>#</a>
      </div>
      <h2>hard easy</h2>
<p>ecdf difference in two distributions(hard-easy)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-34'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-34'>#</a>
      </div>
      <p>hdi</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-35'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-35'>#</a>
      </div>
      <p>gaussian-mixture: set threshold on entrop; delta reference: map(weight -&gt; entropy).  inverse fit-function get weight from threshold entropy.  what is reference?(healthy, no alert); can visualize separate groups(observed label) based on delta histogram; gaussian-mixture. fit prior(unobserved + label) distribution using expectation-maximization(result is the posterior, iterate)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-36'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-36'>#</a>
      </div>
      <p>MCMC sampling: prior(beta distr) look at diff. of thetas(alert/non); likelihood function(bernoulli rv prob of theta1 or theat2) given observed data; combine prior and likelihood to calc the posterior using MCMC (burn, metropolis, etc.) make histogram to see if difference (HDI) between thetas.
self.df['alr1SYS'] alr1+ vitals 
sem (standard error measure) conf. interval
alerts create columns for each header 1&gt;ci 0&lt;ci</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="s">&quot;--alerts&quot;</span> 
		<span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">hdr</span><span class="p">[:</span><span class="mi">6</span><span class="p">]:</span>
			<span class="n">se</span> <span class="o">=</span> <span class="n">sem</span><span class="p">(</span><span class="n">df2</span><span class="p">[</span><span class="n">h</span><span class="p">])</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-37'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-37'>#</a>
      </div>
      <p>(df2[h].std() / df2[h].count() * 1.96 #z from cum dis fun (cdf)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>			<span class="n">n</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="n">h</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">();</span> <span class="c">#nn = df2[h].shape[0]; nnn=len(df2[h])</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-38'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-38'>#</a>
      </div>
      <p>print n, nn, nnn</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>			<span class="n">z</span> <span class="o">=</span> <span class="n">se</span> <span class="o">*</span> <span class="n">sp</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">_ppf</span><span class="p">((</span><span class="mf">1.95</span><span class="p">)</span><span class="o">/</span><span class="mf">2.</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-39'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-39'>#</a>
      </div>
      <p>print 'ci', ci</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>			<span class="n">maxci</span><span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="n">h</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">+</span> <span class="n">z</span>
			<span class="n">minci</span><span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="n">h</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">-</span> <span class="n">z</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-40'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-40'>#</a>
      </div>
      <p>print 'maxmin', maxci, minci</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>			<span class="n">df2</span><span class="p">[</span><span class="s">&#39;alr1&#39;</span><span class="o">+</span><span class="n">h</span><span class="p">]</span><span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="n">h</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">maxci</span> <span class="ow">and</span> <span class="s">&#39;1&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">minci</span> <span class="ow">and</span> <span class="s">&#39;1&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="s">&#39;0&#39;</span> <span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-41'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-41'>#</a>
      </div>
      <p>print df2['SYS'].tail(30)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">print</span> <span class="n">df2</span><span class="p">[</span><span class="n">df2</span><span class="p">[</span><span class="s">&#39;alr1SYS&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-42'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-42'>#</a>
      </div>
      <p>self.alrm </p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="s">&quot;select row over all alr1-types as series using xs&quot;</span>
		<span class="s">&quot;concat string-&gt;alert type&quot;</span>
		<span class="n">hdr</span> <span class="o">=</span> <span class="p">[</span> <span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-43'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-43'>#</a>
      </div>
      <p>print 'hdr ', hdr</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">df2</span><span class="p">[</span><span class="s">&#39;alrm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s">&#39;alr1&#39;</span><span class="o">+</span><span class="n">hdr</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
		<span class="k">for</span> <span class="n">h</span><span class="p">,</span><span class="n">i</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">hdr</span><span class="p">[:</span><span class="mi">6</span><span class="p">]):</span>
			<span class="k">if</span> <span class="n">h</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
				<span class="n">df2</span><span class="p">[</span><span class="s">&#39;alrm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s">&#39;alrm&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df2</span><span class="p">[</span><span class="s">&#39;alr1&#39;</span><span class="o">+</span><span class="n">i</span><span class="p">]</span>  <span class="c">#&#39;alrm&#39; equals all rows in one ie 000100</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-44'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-44'>#</a>
      </div>
      <h2>matching product(n^k) to combinations (n choose k permuationats divided by 2, ie symmetric) by iterating over the 1...k combinations over n {n choose 1}, {n choose 2}...{n choose k}.  using dict of product-space to iterated-sum combination space.  These are held in the dataframe object as 'alrm' and 'alrmV'.  'alrm' column is a tuple, an instance of namedtuples(Vtl) is created over its values.  The Vtl named-tuples are the key, map to the valus of alrmV; a dict{ key named-tuple: value is alarm combo tuple.  So input is tuple --&gt;{dict} --&gt; output is tuple.</h2>
<p>self.df.alrmV</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="s">&quot;alert label from 101000 to sysdiaox&quot;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-45'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-45'>#</a>
      </div>
      <p>alarms = ['sys-','dia-','hr1-','ox-','hr2-','wht-')</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">alm</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s">&#39;alrm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
		<span class="n">codeprd</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="s">&#39;01&#39;</span><span class="p">,</span><span class="n">repeat</span><span class="o">=</span><span class="mi">6</span><span class="p">)]</span> <span class="c">#(&#39;1&#39;,&#39;1&#39;)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-46'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-46'>#</a>
      </div>
      <p>print 'alarm ' , alm[:10] #111111</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-47'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-47'>#</a>
      </div>
      <p>almperm = [ combinations(hdr[:6],repeat=i) for i in range(6) ]</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">a1</span><span class="o">=</span> <span class="p">[</span><span class="n">ii</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span> <span class="n">hdr</span><span class="p">[:</span><span class="mi">6</span><span class="p">],</span><span class="n">j</span><span class="p">)]</span>
		<span class="n">a0</span> <span class="o">=</span><span class="p">[</span><span class="s">&#39;no_alert&#39;</span><span class="p">]</span>
		<span class="n">alarmcmbo</span> <span class="o">=</span> <span class="n">a0</span> <span class="o">+</span> <span class="n">a1</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-48'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-48'>#</a>
      </div>
      <p>print 'prod', len(codeprd), codeprd[-5:]
print 'combo', len(alarmcmbo), alarmcmbo[-5:] </p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	
		<span class="s">&quot;named tuples key(1,1,1,1,1: a,b,c,d)&quot;</span>
		<span class="n">Vtl</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">&#39;Vtl&#39;</span><span class="p">,[</span><span class="s">&#39;sys&#39;</span><span class="p">,</span><span class="s">&#39;dia&#39;</span><span class="p">,</span><span class="s">&#39;hr1&#39;</span><span class="p">,</span><span class="s">&#39;ox&#39;</span><span class="p">,</span><span class="s">&#39;hr2&#39;</span><span class="p">,</span><span class="s">&#39;wht&#39;</span><span class="p">])</span>
		<span class="n">keytuplperm</span> <span class="o">=</span><span class="p">[</span> <span class="n">Vtl</span><span class="p">(</span><span class="o">*</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">codeprd</span> <span class="p">]</span>
		<span class="n">dee</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span> <span class="n">izip</span><span class="p">(</span><span class="n">keytuplperm</span><span class="p">,</span> <span class="n">alarmcmbo</span><span class="p">)</span> <span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-49'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-49'>#</a>
      </div>
      <p>print 'dee ' , dee[tuple('111111')]</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">df2</span><span class="p">[</span><span class="s">&#39;alrmV&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s">&#39;alrm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">dee</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span> <span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-50'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-50'>#</a>
      </div>
      <p>print 'alrmV ', self.df.alrmV.values[:10]</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="bp">self</span><span class="o">.</span><span class="n">alrmV</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s">&#39;alrmV&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-51'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-51'>#</a>
      </div>
      <h3></h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="s">&quot;dataframe class instance attribute&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="n">df2</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-52'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-52'>#</a>
      </div>
      <p>print self.df.describe()</p>
<h6></h6>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-53'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-53'>#</a>
      </div>
      <p>alrmV group over values by sex,geography,timeOfday
plot weighted bubble graph: color=incorrect, y-axis entropy, x-axis reading-index , plot threshold of hard vs easy: indicator function</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">barz</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">&quot;--barplot&quot;</span>
		<span class="s">&quot;frame&quot;</span>
		<span class="n">bz</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;he&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">he</span><span class="p">,</span> <span class="s">&#39;inc&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">inc</span><span class="p">,</span> <span class="s">&#39;alrmV&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">alrmV</span> <span class="p">}</span> <span class="p">)</span>
		<span class="k">print</span> <span class="s">&#39;**alrmV&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alrmV</span><span class="p">[:</span><span class="mi">10</span><span class="p">],</span> <span class="n">bz</span><span class="o">.</span><span class="n">alrmV</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
	
		<span class="s">&quot;parse data&quot;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-54'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-54'>#</a>
      </div>
      <p>confs/dmhi-current/reports/.txt </p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="s">&quot;group/count unique/ sort -&gt; value_counts&quot;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-55'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-55'>#</a>
      </div>
      <p>self.df['Label'].idx(1).count()</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		
		
		<span class="s">&quot;counts&quot;</span>
		<span class="n">at</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">bz</span><span class="o">.</span><span class="n">alrmV</span><span class="p">);</span> <span class="c">#print &quot;**alert-types-10\n&quot;, at.shape, at[:10]</span>
		<span class="n">inc</span> <span class="o">=</span> <span class="n">bz</span><span class="o">.</span><span class="n">inc</span><span class="o">.</span><span class="n">value_counts</span><span class="p">();</span> <span class="c">#print &quot;incorrect\n&quot;, inc #1=incorrect</span>
		<span class="n">he</span> <span class="o">=</span> <span class="n">bz</span><span class="o">.</span><span class="n">he</span><span class="o">.</span><span class="n">value_counts</span><span class="p">();</span> <span class="c">#print &quot;hardeasy\n&quot;, he</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-56'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-56'>#</a>
      </div>
      <p>inc.plot(kind='bar')</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="s">&quot;group by&quot;</span>  <span class="c">#gender, geography, timeofday</span>
		<span class="n">grouped</span> <span class="o">=</span> <span class="n">bz</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s">&#39;he&#39;</span><span class="p">,</span><span class="s">&#39;inc&#39;</span><span class="p">])</span><span class="c">#.sum().plot(kind=&#39;bar&#39;, stacked=True)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-57'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-57'>#</a>
      </div>
      <p>key = [k for (k,v) in grouped.groups]
print 'key', key
print grouped.size()
print 'PPP', grouped.value_counts()</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">pew</span><span class="o">=</span><span class="n">grouped</span><span class="p">[</span><span class="s">&#39;alrmV&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mf">0.</span><span class="p">)</span>
		<span class="k">print</span> <span class="s">&#39;heic vals(</span><span class="se">\n</span><span class="s">&#39;</span> 
		<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">pew</span><span class="p">)</span>

		<span class="n">pew</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">,</span><span class="n">stacked</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-58'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-58'>#</a>
      </div>
      <p>heic = [izip(k,v.sum) for (k,v) in grouped]</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-59'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-59'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">cumsumplt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-60'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-60'>#</a>
      </div>
      <p>cum-sum
cs = self.df['Label','HE']
self.df.HE(np.cumsum)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-61'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-61'>#</a>
      </div>
      <p>plot: sex geog time
fig = plt.figure(); 
fig,axes = plt.subplots(1,3,sharex=True, sharey=True) #"idiom, index=1 but axes is indexed at zero"
plt.subplots_adjust(wspace=0,hspace=0)<br />
axes[0,0].pd.value_counts(self.df.alrm).plot(kind='bar')    </p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>			

		<span class="s">&quot;legend -- self.df[&#39;alrmV&#39;]&quot;</span>

	

		<span class="n">show</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-62'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-62'>#</a>
      </div>
      <p>plt.savefig('barplot.svg')
plt.savefig('barplot.png', dpi=400, bbox_inches='tight')</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-63'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-63'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">bblplt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">&quot;--bubbleplot&quot;</span>
		<span class="s">&quot;x-axis: index&quot;</span>	
		<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">();</span>
		<span class="n">fig</span><span class="p">,</span><span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
		<span class="n">lin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;ptrd&#39;</span><span class="p">]</span><span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">lin</span> <span class="p">)</span>
		
		<span class="s">&quot;text: set INC 1 to &#39;xxx&#39;, CORR 0 to &#39;o&#39;&quot;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-64'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-64'>#</a>
      </div>
      <p>print 'inc', len(self.df.i2), i2[:10]
text(self.df.ptrd.values, self.df.ENT.values, \
             self.df['i2'].values, \
             size=11, horizontalalignment='center')</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="s">&quot;size of weights&quot;</span>	
		<span class="n">sm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dw</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-65'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-65'>#</a>
      </div>
      <p>ct=sm.value_counts()
print 'count sum', ct</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">print</span> <span class="s">&#39;dw sum &#39;</span><span class="p">,</span> <span class="n">sm</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">:]</span>	
		<span class="n">sz</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">/.</span><span class="mo">0001</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sm</span><span class="o">.</span><span class="n">values</span><span class="p">]</span>
		<span class="k">print</span> <span class="s">&#39;dw sum/.01 &#39;</span><span class="p">,</span> <span class="n">sz</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">:]</span>

		<span class="s">&quot;x=readings ,y=entropy &quot;</span>
		<span class="n">x</span><span class="o">=</span><span class="p">[];</span> <span class="n">y</span><span class="o">=</span><span class="p">[]</span>
		<span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;ENT&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
		<span class="n">i</span><span class="o">=</span><span class="mi">0</span>
		<span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
			<span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> 
			<span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
			<span class="n">i</span><span class="o">+=</span><span class="mi">1</span>

		<span class="n">dd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">HE</span><span class="o">.</span><span class="n">values</span>
		<span class="n">d2</span><span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="k">if</span> <span class="n">d</span><span class="o">==</span><span class="s">&#39;e&#39;</span> <span class="k">else</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dd</span><span class="p">]</span>
		<span class="k">print</span> <span class="s">&#39;d2&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">d2</span><span class="p">),</span> <span class="n">d2</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>	
		<span class="s">&quot;incorrect&quot;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-66'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-66'>#</a>
      </div>
      <p>inc=lambda x: x==1 and 'xxx' or 'o'
self.df['i2'] = self.df['INC'].apply(inc)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	 	<span class="n">ii</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">INC</span><span class="o">.</span><span class="n">values</span>
		<span class="n">ccc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;INC&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">values</span> <span class="c">#3747 403</span>
		<span class="k">print</span> <span class="s">&#39;ccc &#39;</span><span class="p">,</span> <span class="n">ccc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ccc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
		<span class="n">iz</span><span class="o">=</span> <span class="p">[</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ii</span><span class="p">]</span> 
		<span class="k">print</span> <span class="s">&#39;ii&#39;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">ii</span><span class="p">),</span> <span class="n">ii</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
		<span class="k">print</span> <span class="s">&#39;iz&#39;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">iz</span><span class="p">),</span> <span class="n">iz</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-67'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-67'>#</a>
      </div>
      <p>sm2 = self.dw.astype(float).sum()/ self.dw.astype(float).sum().max()    </p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="s">&quot;jitter weights&quot;</span>
		<span class="n">yy</span><span class="o">=</span><span class="p">[];</span> <span class="n">zz</span> <span class="o">=</span><span class="mi">0</span>
		<span class="n">ysum</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
		<span class="k">for</span> <span class="n">yz</span> <span class="ow">in</span> <span class="n">y</span><span class="p">:</span>
			<span class="n">zz</span> <span class="o">=</span> <span class="n">random</span><span class="p">()</span> <span class="o">*</span> <span class="mf">5.0</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-68'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-68'>#</a>
      </div>
      <p>yy.append((yz)/ysum)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>			<span class="n">yy</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">yz</span><span class="o">+</span><span class="n">zz</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-69'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-69'>#</a>
      </div>
      <p>yy.append(log(yz))</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">print</span> <span class="s">&#39;yy &#39;</span> <span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">yy</span><span class="p">),</span><span class="nb">max</span><span class="p">(</span><span class="n">yy</span><span class="p">)</span>
		
		<span class="s">&quot;bbl-plot: x=itr,y=entr,c=heic, s=weight cmap=&#39;autumn&#39;&quot;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-70'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-70'>#</a>
      </div>
      <p>c=d2</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">yy</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">iz</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">sz</span> <span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s">&#39;autumn&#39;</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.9</span> <span class="p">)</span> <span class="c">#linewidths=2, edgecolor=&#39;w&#39;)</span>
		<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">yy</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">iz</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">sz</span> <span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s">&#39;autumn&#39;</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.9</span> <span class="p">)</span>
		<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">yy</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">iz</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">sz</span> <span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s">&#39;autumn&#39;</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>
		<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">yy</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">iz</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">sz</span> <span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s">&#39;autumn&#39;</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-71'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-71'>#</a>
      </div>
      <p>"styling"</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">hspace</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
		
		<span class="s">&quot;axis&quot;</span> <span class="c">#( [0,xmax,ymin,ymax] )</span>
		<span class="n">xlabel</span><span class="p">(</span><span class="s">&#39;patient readings&#39;</span><span class="p">)</span>
		<span class="n">ylabel</span><span class="p">(</span><span class="s">&#39;entropy&#39;</span><span class="p">)</span>
		<span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4150</span><span class="p">)</span>
		<span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">70</span><span class="p">)</span>
		
		<span class="s">&quot;title: hard easy&quot;</span>
		<span class="n">hhh</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;HE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
		<span class="n">h1</span> <span class="o">=</span> <span class="n">hhh</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> <span class="n">hh2</span> <span class="o">=</span><span class="n">hhh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
		<span class="n">cr</span> <span class="o">=</span> <span class="n">ccc</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="n">ccr</span><span class="o">=</span><span class="n">ccc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> 
		<span class="n">title</span><span class="p">(</span><span class="s">&quot;boosted weights vs entropy CRR=</span><span class="si">%s</span><span class="s">,INC=</span><span class="si">%s</span><span class="s">,HARD=</span><span class="si">%s</span><span class="s">,EASY=</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cr</span><span class="p">,</span><span class="n">ccr</span><span class="p">,</span><span class="n">h1</span><span class="p">,</span><span class="n">hh2</span><span class="p">))</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-72'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-72'>#</a>
      </div>
      <p>plt.title(r'$\mathrm{Histogram\ of\ IQ:}\ \mu=%.3f,\ \sigma=%.3f$' %(mu, sigma))
plt.title(r'$\mathrm{boosted\ weight\ vs\ entropy:}\ \mu=%.3f,\ \sigma=%.3f$' %(mu, sigma))</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		
		<span class="s">&quot;legend&quot;</span>
		<span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s">&#39;best&#39;</span><span class="p">)</span>
		<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s">&#39;correct=</span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">cr</span><span class="p">))</span>
		<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s">&#39;incorrect=</span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">ccr</span><span class="p">))</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-73'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-73'>#</a>
      </div>
      <p>fig.draw() </p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">show</span><span class="p">()</span>



		<span class="s">&quot;y=count x=binned-entropy c=INC s=weight&quot;</span>


		<span class="s">&quot;-- parallel box-plot to compare hard vs easy&quot;</span>
		
		
		<span class="s">&quot;--time-series plot&quot;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-74'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-74'>#</a>
      </div>
      <p>def kdeCI(self): pass
def germanTank(self): pass #"think stats book"</p>
<p>def alert1(self):
    "confidence intv"</p>
<pre><code>"get frame, row"
</code></pre>
<h1>self.df[self.data[</h1>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-75'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-75'>#</a>
      </div>
      <h2>entropy</h2>
<p>bayes binning</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-76'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-76'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">uniqueSrt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
	        <span class="n">c</span><span class="o">=</span><span class="n">Counter</span><span class="p">();</span> <span class="n">wht</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wts</span><span class="p">);</span> <span class="n">arln</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="mi">4150</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-77'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-77'>#</a>
      </div>
      <p>dict key=weight : values=count-frequency</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">wht</span><span class="p">:</span>
	                <span class="n">c</span><span class="p">[</span><span class="n">e</span><span class="p">]</span><span class="o">+=</span><span class="mi">1</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-78'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-78'>#</a>
      </div>
      <p>interval count
ascending sort by key</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>			<span class="n">srt</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="p">)</span>
			<span class="k">return</span> <span class="n">srt</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-79'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-79'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">entCntBin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span> <span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-80'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-80'>#</a>
      </div>
      <p>return scalar, entropy for one reading</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	 	<span class="n">c</span><span class="o">=</span><span class="n">Counter</span><span class="p">();</span> <span class="n">wht</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">);</span> <span class="n">arln</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="mi">4150</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-81'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-81'>#</a>
      </div>
      <p>dict key=weight : values=count-frequency</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">wht</span><span class="p">:</span>
			<span class="n">c</span><span class="p">[</span><span class="n">e</span><span class="p">]</span><span class="o">+=</span><span class="mi">1</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-82'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-82'>#</a>
      </div>
      <p>interval count</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">srt</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="p">)</span> <span class="c">#ascending sort by key</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-83'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-83'>#</a>
      </div>
      <p>list iterator next()
i = iter(self.bins)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">i</span> <span class="o">=</span> <span class="p">[</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">nditer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bins</span><span class="p">)]</span>
		<span class="n">dbn</span> <span class="o">=</span> <span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-84'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-84'>#</a>
      </div>
      <p>count number of val in binned interval</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">frc</span><span class="o">=</span><span class="p">[]</span> <span class="p">;</span> <span class="n">tvr</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">trx</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-85'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-85'>#</a>
      </div>
      <p>for x in np.nditer(self.bins, flags=['index']):</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">srt</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">bins</span><span class="p">[</span><span class="n">trx</span><span class="p">]:</span>
					<span class="n">tvr</span> <span class="o">+=</span> <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="n">frc</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tvr</span><span class="p">)</span>
					<span class="n">tvr</span><span class="o">=</span><span class="mi">0</span>
					<span class="n">trx</span><span class="o">+=</span><span class="mi">1</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-86'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-86'>#</a>
      </div>
      <p>dbn = i.next()</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-87'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-87'>#</a>
      </div>
      <p>calculate entropy over binned counts</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">etr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span> <span class="p">((</span><span class="n">p</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">p</span><span class="p">))</span> <span class="p">,</span><span class="mf">0.0</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">frc</span> <span class="k">if</span> <span class="n">p</span><span class="o">&gt;</span><span class="mf">0.0</span><span class="p">])</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-88'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-88'>#</a>
      </div>
      <p>print 'entropy ', etr</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">return</span> <span class="n">etr</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-89'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-89'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">entropy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-90'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-90'>#</a>
      </div>
      <p>return for all readings</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">entFeatures</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wts</span>
		<span class="n">c</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
		<span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">entFeatures</span><span class="o">.</span><span class="n">flat</span><span class="p">):</span>      <span class="c">#get the unique  weight vals and number</span>
			<span class="n">c</span><span class="p">[</span><span class="n">e</span><span class="p">]</span><span class="o">+=</span><span class="mi">1</span>
		<span class="n">entT</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">entFeatures</span><span class="p">))</span>  <span class="c">#zip(*matrix) transposes the matrix row&lt;=&gt;col&lt;br&gt;</span>
		<span class="n">ent</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">entCntBin</span><span class="p">(</span> <span class="n">e</span> <span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">entT</span>  <span class="p">]</span>  <span class="c">#entCnt returns the count based entropy&lt;br&gt;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">entbys</span> <span class="o">=</span> <span class="n">ent</span>
	 	<span class="k">return</span> <span class="n">ent</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-91'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-91'>#</a>
      </div>
      <h2>histogram</h2>
<p>A histogram is discrete, count of number of values in a bin.   It is a frequency distribution of measurements, where the mean value can be seen directly(the highest bar).  Given a histogram the standard deviation, is the region centered at the mean value.  For a normal distribution, 68% of the measurements lie within one standard deviation on either side of the mean.  From a histogram, the width of the area which contains 68% of the measurements is 2stdv, or the width/2 for 1 stdv.  Histograms can be used to check theoretical distributions against observed data, comparing populatinos, or deriving particle velocity from time dilation (a proof of special relativity).  They answer the question of how many and where?  Viewing a histogram reveals whether the distribution is symmetric, left-skewed, or right-skewed, the number of modes, and any outliers.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-92'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-92'>#</a>
      </div>
      <p>What is the probability that a sample taken from the signal will be within a certain state or bin? What is the probability a randomly chosen sample will have value greater than some number?  Integrating under the area of frequency counts (sum=1) in a histogram gives a probability distribution.  For example, a square have has a pdf with only two possible values, a triangle wave has a uniform distribution, and random noise has a gaussian (bell-shaped curve).  Thus, rather than having a frequency count of numbers in a bin, a probability of a number being in a bin can be given.  Likewise, a cumulative distribution function, gives the probability of finding some number, at any given time, in a range of bins, or standard deviations.  The gaussian distribution cannot be simply integrated, it requires sampling and tabulation of millions of points.  The P(x) would be restricted to those x-nubmer of states a signal takes.   </p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-93'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-93'>#</a>
      </div>
      <p>The clt (central limit thm.) states that sum of random numbers becomes gaussian as more r.v. are summed.  The clt does not require the r.v to be from any particular distribution, or all from the same.  This is why normally distributed signal are seen widely in nature.  When many different random forces are interacting, the resulting pdf becomes Gaussian.   For example, adding one random number generates a step function, two rv generate uniform distribution(triangle wave), and many r.v generate a gaussian.  Often the number of states, or bin-sizes far exceeds number of samples in a signal.  Selecting bin number is a compromise of the statistical noise in two directions(x,y).  If too many bins, there are few counts, and the amplitude(y) is difficult to estimate.  If too few, the probability mass function (discrete), loses resolution along the x-axis.  </p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-94'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-94'>#</a>
      </div>
      <p>robustness mean vs median
http://stats.stackexchange.com/questions/59838/standard-error-of-the-median</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-95'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-95'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">ecdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ent</span><span class="p">):</span>
		<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">ent</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bins</span><span class="p">,</span> <span class="n">normed</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">cumulative</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
		<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">&quot;cumulative distribution&quot;</span><span class="p">)</span>
		<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">&quot;entropy&quot;</span><span class="p">)</span>
		<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&quot;Frequency&quot;</span><span class="p">)</span>
		<span class="n">plt</span><span class="o">.</span><span class="n">show</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-96'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-96'>#</a>
      </div>
      <h2>kde</h2>
<p>A kernel is a type of probability distribution function, required to be even.  A kernel is non-negative, real-valued, even, integral=1.  PDFs which are kernels include uniform(-1,1), and standard normal distributions.
KDE estimates the pdf of a continuous random variable without assumption about its underlying distribution, non-parametrically.  At every point, a kernel is created with the point at its center; therefore kernel is symmetric.  PDF is then estimated by adding all of the kernel functions and dividing by number of data(non-negative, and normalizes).</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-97'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-97'>#</a>
      </div>
      <p>The bandwidth of a kernel is the standard deviation.  Chosen small for large, tightly packed data, larger for sparse, small data sets.  </p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-98'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-98'>#</a>
      </div>
      <p>kernel
kernel = stats.gaussian_kde(ent4150)
plt.title("kde")
kdeX = np.linspace(0,5,100)
plot(kdeX,kernel(kdeX),'r',label='kde') # distribution function
print 'krnl', kernel
hist(ent4150,normed=1,alpha=.3) # histogram over all points</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-99'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-99'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">plotkde</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-100'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-100'>#</a>
      </div>
      <p>kernel = stats.gaussian_kde( ent )
kdeX = np.linspace(0,5,100)
thresh = [ kernel(x) for x in kdeX ]
he = [   i for t in thresh ]</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-101'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-101'>#</a>
      </div>
      <p>plot(kdeX,kernel(kdeX),'r',label='kde') # distribution function</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre> 
		<span class="n">density</span> <span class="o">=</span> <span class="n">kde</span><span class="o">.</span><span class="n">gaussian_kde</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entbys</span><span class="p">)</span>
		<span class="n">xgrid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entbys</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entbys</span><span class="p">),</span> <span class="mi">1000</span><span class="p">)</span>
		<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entbys</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">normed</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
		<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xgrid</span><span class="p">,</span> <span class="n">density</span><span class="p">(</span><span class="n">xgrid</span><span class="p">),</span> <span class="s">&#39;r-&#39;</span><span class="p">)</span>
		<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-102'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-102'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">plotkdefit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-103'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-103'>#</a>
      </div>
      <p>best fit of data</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="p">(</span><span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="p">)</span> <span class="o">=</span> <span class="n">norm</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entbys</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-104'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-104'>#</a>
      </div>
      <p>the histogram of the data</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">n</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">patches</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entbys</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="n">normed</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s">&#39;green&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-105'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-105'>#</a>
      </div>
      <p>add a 'best fit' line</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">y</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">normpdf</span><span class="p">(</span> <span class="n">bins</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="p">)</span>
		<span class="n">l</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bins</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s">&#39;r--&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-106'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-106'>#</a>
      </div>
      <p>plot</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">&#39;Entropy&#39;</span><span class="p">)</span>
		<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&#39;Probability&#39;</span><span class="p">)</span>
		<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">r&#39;$\mathrm{Histogram\ of\ Entropy:}\ \mu=</span><span class="si">%.3f</span><span class="s">,\ \sigma=</span><span class="si">%.3f</span><span class="s">$&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="p">))</span>
		<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
		
		<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-107'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-107'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">plotkdeNL</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">fitfunc</span>  <span class="o">=</span> <span class="k">lambda</span> <span class="n">p</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><span class="p">((</span><span class="n">x</span><span class="o">-</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
		<span class="n">errfunc</span>  <span class="o">=</span> <span class="k">lambda</span> <span class="n">p</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">fitfunc</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
		
		<span class="n">filename</span> <span class="o">=</span> <span class="s">&quot;gaussdata.csv&quot;</span>
		<span class="n">data</span>     <span class="o">=</span> <span class="n">loadtxt</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="n">skiprows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">delimiter</span><span class="o">=</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
		<span class="n">xdata</span>    <span class="o">=</span> <span class="n">data</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span>
		<span class="n">ydata</span>    <span class="o">=</span> <span class="n">data</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span>
		
		<span class="n">init</span>  <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
		
		<span class="n">out</span>   <span class="o">=</span> <span class="n">leastsq</span><span class="p">(</span> <span class="n">errfunc</span><span class="p">,</span> <span class="n">init</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">))</span>
		<span class="n">c</span> <span class="o">=</span> <span class="n">out</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
		
		<span class="k">print</span> <span class="s">&quot;A exp[-0.5((x-mu)/sigma)^2] + k &quot;</span>
		<span class="k">print</span> <span class="s">&quot;Parent Coefficients:&quot;</span>
		<span class="k">print</span> <span class="s">&quot;1.000, 0.200, 0.300, 0.625&quot;</span>
		<span class="k">print</span> <span class="s">&quot;Fit Coefficients:&quot;</span>
		<span class="k">print</span> <span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="nb">abs</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span><span class="n">c</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
		
		<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xdata</span><span class="p">,</span> <span class="n">fitfunc</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">xdata</span><span class="p">))</span>
		<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">)</span>
		
		<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">r&#39;$A = </span><span class="si">%.3f</span><span class="s">\  \mu = </span><span class="si">%.3f</span><span class="s">\  \sigma = </span><span class="si">%.3f</span><span class="s">\ k = </span><span class="si">%.3f</span><span class="s"> $&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="nb">abs</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span><span class="n">c</span><span class="p">[</span><span class="mi">3</span><span class="p">]));</span>
		
		<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-108'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-108'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">ksggviolin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ent</span><span class="p">):</span>
		<span class="k">pass</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-109'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-109'>#</a>
      </div>
      <h2>summary statistics</h2>
<p>Error estimate can be obtained by repeating measurements in time.  The error, or deviations can be calculated as the difference from the mean/average over all measurements.  However, the average deviation over n samples, by definition, gives zero (the negative vs positive deviations cancel).  To remove the negative values, the erros are squared, and then averaged; this is the standard deviation measure.  The std tell us the average spread about the mean value.  Scales of precision for various measures: cm 0.1, electronic device half of last unit, 128.3 +- .015</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-110'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-110'>#</a>
      </div>
      <p>5-number, box-plot</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-111'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-111'>#</a>
      </div>
      <p>Confidence intervals</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-112'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-112'>#</a>
      </div>
      <p>HDI vs tailed intervals
using highest density interval instead of equal-tailed intervals
Suppose heads=0 in n=10 flips of a coin, modeled with Bernoulli likelihood, and uniform prior dbeta(1,1).  Then the posterior = dbeta(1,11).  The graph of this curve is aysmptotic.  The 95% HDI includes zero, while the equal-tail intervals do not.  HDI is more meaningful and intuitive summary of the posterior.<br />
http://doingbayesiandataanalysis.blogspot.com/2012/04/why-to-use-highest-density-intervals.html</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-113'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-113'>#</a>
      </div>
      <p>ECDF
Cumulative density functions good way to distinguish distributions.  Present the data without transformation, unlike histograms or kde.  Give good visual representation, where accuracy of each point is buffered by points before and after without binning(histograms), or smoothing(kde).  Work well with parmaetric, mixture, or messy non-parametric distribution.  Shallow sloped areas represent sparse distribution, and steep represent dense distribution.
http://stats.stackexchange.com/questions/51718/assessing-approximate-distribution-of-data-based-on-a-histogram/51753#51753 </p>
<p>plot(ecdf(Annie),xlim=c(min(Zoe),max(Annie)),col="red",main="ECDFs")
lines(ecdf(Brian),col="blue")
lines(ecdf(Chris),col="green")
lines(ecdf(Zoe),col="orange")</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-114'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-114'>#</a>
      </div>
      <p>qq, kir-smirnov
parallel plot (violin plot)
http://pyinsci.blogspot.com/2009/09/violin-plot-with-matplotlib.html</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-115'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-115'>#</a>
      </div>
      <h2>threshold</h2>
<p>http://blog.counsyl.com/2013/08/07/detecting-genetic-copy-number-with-gaussian-mixture-models/</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-116'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-116'>#</a>
      </div>
      <h2>signal processing</h2>
<p>time series
- cross-validation
http://www.dspguide.com/ch2/4.htm
laplace transform
z-transform
benford law
kelly criterion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-117'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-117'>#</a>
      </div>
      <h2>stats-scores</h2>
<p>aor (tibshirani paper)
simpsons paradox http://vudlab.com/simpsons/
kelly criterion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-118'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-118'>#</a>
      </div>
      <p>apdx.
def rnkci(self): </p>
<pre><code>vitals = self.data[0]
alerts = self.data[1]
readings= self.data[2]


#heicg=[ "hard"=None, "easy"=None, "inc"=None, "cor"=None, "glb"=None ]
#return heicg
</code></pre>
<p>def histo(self):
    #------------------------------------------------------------
    # First figure: show normal histogram binning
    fig = plt.figure(figsize=(10, 4))
    fig.subplots_adjust(left=0.1, right=0.95, bottom=0.15)</p>
<pre><code>ax1 = fig.add_subplot(121)
ax1.hist(self.entnrm, bins=15, histtype='stepfilled', alpha=0.2, normed=True)
ax1.set_xlabel('entropy bins=15')
ax1.set_ylabel('Count(t)')

ax2 = fig.add_subplot(122)
ax2.hist(self.entnrm, bins=200, histtype='stepfilled', alpha=0.2, normed=True)
ax2.set_xlabel('entropy bins=200')
ax2.set_ylabel('Count(t)')

#------------------------------------------------------------
# Second &amp; Third figure: Knuth bins &amp; Bayesian Blocks
fig = plt.figure(figsize=(10, 4))
fig.subplots_adjust(left=0.1, right=0.95, bottom=0.15)

for bins, title, subplot in zip(['knuth', 'blocks'],
                                ["Knuth's rule-fixed bin-width", 'Bayesian blocks variable width'],
                                [121, 122]):
    ax = fig.add_subplot(subplot)

    # plot a standard histogram in the background, with alpha transparency
    hist(self.entnrm, bins=200, histtype='stepfilled',
         alpha=0.2, normed=True, label='standard histogram')

    # plot an adaptive-width histogram on top
    hist(self.entbys, bins='blocks', ax=ax, color='black',
         histtype='step', normed=True, label=title)

    ax.legend(prop=dict(size=12))
    ax.set_xlabel('entropy bins')
    ax.set_ylabel('C(t)')

plt.show()
</code></pre>
<p>def comparePlot(self):
        #hard vs easy
    #correct vs incorrect
    #correct vs incorrect
    pass</p>
<p>def plot_accuracy(x, y, plot_placement, x_legend):
   """Plot accuracy as a function of x."""
   x = np.array(x)
   y = np.array(y)
   pl.subplots_adjust(hspace=0.5)
   pl.subplot(plot_placement)
   pl.title('Classification accuracy as a function of %s' % x_legend)
   pl.xlabel('%s' % x_legend)
   pl.ylabel('Accuracy')
   pl.grid(True)
   pl.plot(x, y)</p>
<p>pl.figure(1)</p>
<h1>Plot accuracy evolution with #examples</h1>
<p>accuracy, n_examples = zip(*stats['accuracy_history'])
plot_accuracy(n_examples, accuracy, 211, "training examples (#)")</p>
<h1>Plot accuracy evolution with runtime</h1>
<p>accuracy, runtime = zip(*stats['runtime_history'])
plot_accuracy(runtime, accuracy, 212, 'runtime (s)')</p>
<p>pl.show()</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
</div>
</body>
